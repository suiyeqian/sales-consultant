<div class="goal">
  <div class="goal-setting">
    <div class="sub-title-wrap"><h4 class="sub-title">目标设定</h4></div>
    <form [formGroup]="goalForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="team-goal">
        <div class="form-group row">
          <label class="col-5 control-label bold">销售周期</label>
          <!-- formControlName="cyc" -->
          <select class="form-control col-6" [formControl]="goalForm.controls.month" (ngModelChange)="monthChange($event)">
            <option *ngFor="let date of goalData">{{date.month}}</option>
          </select>
        </div>
        <p class="row goal-1" ><span class="col-5">{{supGoalname}}</span> <span class="col-6">{{formDataset.superiorGoal | number}}元</span></p>
        <p class="row" ><span class="col-5">{{myGoalName}}</span> <span class="col-6">{{formDataset.goalAmt | number}}元</span></p>
      </div>
      <div class="member-goal">
        <h5>任务分配</h5>
        <div class="setting-list">
          <div class="unit">
              <span class="pull-right">（单位：万元）</span>
          </div>
          <div class="setting-item" *ngFor="let item of formDataset.goalList">
            <!-- <i class="avatar"></i> -->
            <span class="member-name">{{item.name}}</span>
            <div class="slide-bar">
              <nouislider [connect]="[true,false]" [disabled]="goalForm.controls.goalList.controls[item.id].disabled" [formControl]="goalForm.controls.goalList.controls[item.id]" [min]="0" [max]="100" [step]="1" [tooltips]=" true" (ngModelChange)="rateChange()"></nouislider>
            </div>
            <span class="pull-right goal-val">{{formDataset.goalAmt * goalForm.controls.goalList.value[item.id]/1000000 |number:'1.0-0'}}</span>
          </div>
        </div>
      </div>
      <div class="result text-center">
        <p class="bold">总计：{{goalSum|number}}元</p>
        <p *ngIf="formDataset.goalAmt<goalSum">
          超出团队目标<span class="bold font-blue">{{goalSum - formDataset.goalAmt|number}}</span>元
        </p>
        <p *ngIf="formDataset.goalAmt == goalSum"> 已达到目标金额 </p>
        <p *ngIf="formDataset.goalAmt>goalSum">
          低于团队目标<span class="font-red bold">{{formDataset.goalAmt - goalSum|number}}</span>元
        </p>
      </div>
      <div class="text-center">
        <button type="submit" class="btn btn-confirm" [disabled]="!formDataset.isSet">确定</button>
        <button class="btn btn-cancel" (click)="reset()" type="button" [disabled]="!formDataset.isSet||!formDataset.changed">重置</button>
      </div>
    </form>
  </div>
</div>
